# åŒ»ç–—æ•°æ®æ•´åˆå¹³å° (MDIP)

ä¸€ä¸ªä¸“ä¸šçº§çš„åŒ»ç–—ç ”ç©¶æ•°æ®æ•´åˆã€åˆ†æå’Œè´¨é‡æ§åˆ¶å¹³å°ï¼Œä¸“ä¸ºå¤šæºåŒ»ç–—æ•°æ®å¤„ç†è€Œè®¾è®¡ï¼Œéµå¾ªè½¯ä»¶å·¥ç¨‹æœ€ä½³å®è·µã€‚

## ğŸš€ é¡¹ç›®æ¦‚è¿°

åŒ»ç–—æ•°æ®æ•´åˆå¹³å° (Medical Data Integration Platform, MDIP) æ˜¯ä¸€ä¸ªä¸“ä¸ºåŒ»ç–—ç ”ç©¶å’Œä¸´åºŠæ•°æ®å¤„ç†è®¾è®¡çš„ç»¼åˆæ€§æ•°æ®æ•´åˆå¹³å°ã€‚è¯¥å¹³å°æ”¯æŒå¤šç§æ ¼å¼çš„åŒ»ç–—æ•°æ®æ–‡ä»¶çš„æ™ºèƒ½å‘ç°ã€åŒ¹é…ã€åˆå¹¶å’Œè´¨é‡æ§åˆ¶ï¼Œä¸ºåŒ»ç–—ç ”ç©¶äººå‘˜æä¾›ä¸“ä¸šçº§çš„æ•°æ®å¤„ç†å·¥å…·ã€‚

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

- **ï¿½ å¤šæ ¼å¼æ”¯æŒ**: Excel (.xlsx, .xls)ã€CSV æ–‡ä»¶å¤„ç†
- **ğŸ” æ•°æ®è´¨é‡è¯„ä¼°**: å…¨é¢çš„è´¨é‡æŒ‡æ ‡å’ŒæŠ¥å‘Šï¼ˆå®Œæ•´æ€§ã€å‡†ç¡®æ€§ã€ä¸€è‡´æ€§ã€å”¯ä¸€æ€§ã€æ—¶æ•ˆæ€§ï¼‰
- **ğŸ”— çµæ´»åŒ¹é…ç­–ç•¥**: ç²¾ç¡®åŒ¹é…å’Œæ¨¡ç³ŠåŒ¹é…ç®—æ³•ï¼Œå¯é…ç½®ç›¸ä¼¼åº¦é˜ˆå€¼
- **âš™ï¸ å­—æ®µé…ç½®ç³»ç»Ÿ**: åŒ»ç–—æ•°æ®å­—æ®µå®šä¹‰å’Œåˆ†ç±»çš„å¯å®šåˆ¶åŒ–é…ç½®
- **âœ… éªŒè¯æ¡†æ¶**: å†…ç½®åŒ»ç–—æ•°æ®éªŒè¯è§„åˆ™å’Œè‡ªå®šä¹‰è§„åˆ™æ”¯æŒ
- **ğŸ“ˆ é«˜çº§æŠ¥å‘ŠåŠŸèƒ½**: è¯¦ç»†çš„Excelå’ŒJSONæ ¼å¼æŠ¥å‘Šï¼ŒåŒ…å«å¯è§†åŒ–å…ƒç´ 
- **ï¿½ å‘½ä»¤è¡Œç•Œé¢**: ä¸“ä¸šçš„CLIå·¥å…·ï¼Œæ”¯æŒè‡ªåŠ¨åŒ–å’Œæ‰¹å¤„ç†
- **ğŸ¥ åŒ»ç–—æ•°æ®ä¸“ç”¨**: ä¸“ä¸ºä¸´åºŠç ”ç©¶æ•°æ®æ•´åˆè®¾è®¡çš„ä¸“ä¸šå·¥å…·

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹æ³•ä¸€ï¼šGUIå·¥å…·ï¼ˆæœ€ç®€å•ï¼‰

**å¯åŠ¨å·¥å…·é›†**
```bash
python å¯åŠ¨å·¥å…·.py
```

**å¯ç”¨å·¥å…·**ï¼š
**å¯ç”¨å·¥å…·**ï¼š

**1. æ•°æ®æ•´ç†**
   - **å•æ–‡ä»¶å¤šSheetåˆå¹¶å·¥å…·** - å°†ä¸€ä¸ªExcelæ–‡ä»¶çš„å¤šä¸ªSheetåˆå¹¶ä¸ºä¸€å¼ è¡¨
   - **è·¨æ–‡ä»¶åˆå¹¶å·¥å…·ï¼ˆç»å…¸ç‰ˆï¼‰** - å‘½ä»¤è¡Œäº¤äº’å¼åˆå¹¶
   - **è·¨æ–‡ä»¶åˆå¹¶å·¥å…·ï¼ˆå¢å¼ºç‰ˆï¼‰** - å›¾å½¢ç•Œé¢ï¼Œæ–‡ä»¶é€‰æ‹©å™¨å’Œå¯è§†åŒ–é…ç½®
   - **è·¨æ–‡ä»¶åˆå¹¶å·¥å…·ï¼ˆä¸“ä¸šç‰ˆï¼‰** â­ **æ¨è** - å®Œæ•´åŠŸèƒ½ç‰ˆ
     - ğŸ“Š æ•°æ®é¢„è§ˆè¡¨æ ¼ - åˆå¹¶å‰é¢„è§ˆæ•°æ®
     - ğŸ“¦ **æ‰¹é‡åˆå¹¶æ¨¡å¼** - ä¸€æ¬¡å¤„ç†å¤šä¸ªæ–‡ä»¶å¯¹
     - ğŸ’¾ æ¨¡æ¿ä¿å­˜ - ä¿å­˜å¸¸ç”¨é…ç½®
     - ğŸ“ å¯¼å‡ºæŠ¥å‘Š - ç”Ÿæˆè¯¦ç»†æŠ¥å‘Š
     - â†©ï¸ æ’¤é”€/é‡åš - æ”¯æŒæ“ä½œå›é€€
   - **é‡å¤è®°å½•å»é‡å·¥å…·** - è¯†åˆ«å’Œåˆ é™¤é‡å¤æ•°æ®
   - **å­—æ®µå”¯ä¸€æ€§æ£€æŸ¥å·¥å…·** - æ£€æŸ¥å­—æ®µä½œä¸ºä¸»é”®çš„å¯è¡Œæ€§

**2. è®ºæ–‡å‡†å¤‡**
   - **å‚è€ƒæ–‡çŒ®éªŒè¯å·¥å…·** - éªŒè¯å‚è€ƒæ–‡çŒ®æœ‰æ•ˆæ€§å¹¶ç”ŸæˆRISå¼•ç”¨æ–‡ä»¶
   - **è®ºæ–‡æ ¼å¼åŒ–å·¥å…·** - è‡ªåŠ¨æ ¼å¼åŒ–è®ºæ–‡ç¨¿ä»¶ï¼Œæ”¯æŒå¤šç§æ–‡æ¡£ç±»å‹ï¼ˆæ­£æ–‡ã€Cover Letterç­‰ï¼‰ï¼Œæ™ºèƒ½å¤„ç†è¡¨æ ¼å’Œè¡Œå·

**å¿«é€Ÿä¸Šæ‰‹**ï¼š
```bash
# 1. å¯åŠ¨å·¥å…·é›†ï¼ˆä¸»å…¥å£ï¼‰
python å¯åŠ¨å·¥å…·.py
# 2. é€‰æ‹©åŠŸèƒ½æ¨¡å—ï¼ˆæ•°æ®æ•´ç†/è®ºæ–‡å‡†å¤‡ï¼‰
# 3. é€‰æ‹©å…·ä½“å·¥å…·

# æˆ–è€…ç›´æ¥ä½¿ç”¨å¿«æ·è„šæœ¬ï¼š
# - å¯åŠ¨è®ºæ–‡æ ¼å¼åŒ–å·¥å…·.bat
# - å¯åŠ¨å‚è€ƒæ–‡çŒ®éªŒè¯å·¥å…·.bat

# ç¤ºä¾‹ï¼šä½¿ç”¨ä¸“ä¸šç‰ˆåˆå¹¶å·¥å…·
# 1. å¯åŠ¨å·¥å…·é›† -> é€‰æ‹©"1. æ•°æ®æ•´ç†" -> é€‰æ‹©"4. è·¨æ–‡ä»¶åˆå¹¶å·¥å…· (ä¸“ä¸šç‰ˆ)"
# 2. ä½¿ç”¨å›¾å½¢ç•Œé¢é€‰æ‹©æ–‡ä»¶ã€é…ç½®åˆå¹¶å‚æ•°
# 3. ç‚¹å‡»"æ‰§è¡Œåˆå¹¶"å®Œæˆæ“ä½œ
```

ğŸ“– **è¯¦ç»†æ•™ç¨‹**ï¼š
- åŸºç¡€åŠŸèƒ½ï¼š`å·¥å…·ä½¿ç”¨æŒ‡å—.md`
- æ‰¹é‡å¤„ç†ï¼š`docs/æ‰¹é‡åˆå¹¶ä½¿ç”¨æŒ‡å—.md`

### æ–¹æ³•äºŒï¼šç›´æ¥CLIä½¿ç”¨

```bash
# åˆ†æç›®å½•ä¸­çš„æ–‡ä»¶ç»“æ„
python mdip.py analyze ./data --output åˆ†ææŠ¥å‘Š.xlsx --verbose

# ä½¿ç”¨åŒ»ç–—éªŒè¯è§„åˆ™è¿›è¡Œæ•°æ®è´¨é‡è¯„ä¼°
python mdip.py quality æ‚£è€…æ•°æ®.xlsx --medical --critical-fields patient_id,name --output è´¨é‡æŠ¥å‘Š.xlsx

# å¤šæ–‡ä»¶æ¨¡ç³ŠåŒ¹é…æ•´åˆ
python mdip.py match å† è„‰é€ å½±æ•°æ®.xlsx PCIæ•°æ®.csv --fields patient_id,name --fuzzy --output æ•´åˆæŠ¥å‘Š.xlsx

# åŒ»ç–—æ ‡å‡†æ•°æ®éªŒè¯
python mdip.py validate å®éªŒå®¤ç»“æœ.xlsx --medical --show-errors --output éªŒè¯æŠ¥å‘Š.xlsx
```

### æ–¹æ³•äºŒï¼šå®‰è£…åä½œä¸ºåº“ä½¿ç”¨

```bash
# å®‰è£…MDIPåŒ…
pip install -r requirements.txt
pip install -e .

# ä½œä¸ºPythonåº“ä½¿ç”¨
python -c "from mdip.core.matcher import DataMatcher; print('MDIPå®‰è£…æˆåŠŸï¼')"
```

### æ–¹æ³•ä¸‰ï¼šVSCodeé›†æˆå¼€å‘

**è°ƒè¯•é…ç½®** (`.vscode/launch.json`)ï¼š
- F5 å¿«é€Ÿå¯åŠ¨ä»»ä½•å·¥å…·
- æ–­ç‚¹è°ƒè¯•æ”¯æŒ
- é›†æˆç»ˆç«¯æ‰§è¡Œ

**å¿«é€Ÿä»»åŠ¡** (`.vscode/tasks.json`)ï¼š
- Ctrl+Shift+P â†’ "è¿è¡Œä»»åŠ¡"
- ä¸€é”®å¯åŠ¨å·¥å…·

## ğŸ“‹ å®‰è£…è¯´æ˜

### ç³»ç»Ÿè¦æ±‚
- Python 3.8 æˆ–æ›´é«˜ç‰ˆæœ¬
- pip åŒ…ç®¡ç†å™¨

### å®‰è£…ä¾èµ–åŒ…

```bash
# å¯¼èˆªåˆ°é¡¹ç›®ç›®å½•
cd "Early CHD Project"

# å®‰è£…æ‰€éœ€åŒ…
pip install -r requirements.txt

# å¯é€‰ï¼šä»¥å¼€å‘æ¨¡å¼å®‰è£…ï¼Œç”¨äºåº“è°ƒç”¨
pip install -e .
```

### éªŒè¯å®‰è£…

```bash
# æµ‹è¯•CLIåŠŸèƒ½
python mdip.py --help

# ä½¿ç”¨ç¤ºä¾‹æ•°æ®æµ‹è¯•ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰
python examples/basic_file_analysis.py ./
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
medical-data-integration-platform/
â”œâ”€â”€ README.md                          # é¡¹ç›®è¯´æ˜æ–‡æ¡£
â”œâ”€â”€ requirements.txt                    # Pythonä¾èµ–åŒ…
â”œâ”€â”€ setup.py                          # é¡¹ç›®å®‰è£…é…ç½®
â”œâ”€â”€ .gitignore                         # Gitå¿½ç•¥æ–‡ä»¶
â”œâ”€â”€ LICENSE                            # å¼€æºè®¸å¯è¯
â”œâ”€â”€ docs/                              # é¡¹ç›®æ–‡æ¡£
â”‚   â”œâ”€â”€ installation.md               # å®‰è£…æŒ‡å—
â”‚   â”œâ”€â”€ user_guide.md                 # ç”¨æˆ·æŒ‡å—
â”‚   â”œâ”€â”€ api_reference.md              # APIå‚è€ƒ
â”‚   â””â”€â”€ examples/                      # ä½¿ç”¨ç¤ºä¾‹
â”œâ”€â”€ src/                               # æºä»£ç 
â”‚   â””â”€â”€ mdip/                         # ä¸»ç¨‹åºåŒ…
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ core/                      # æ ¸å¿ƒåŠŸèƒ½æ¨¡å—
â”‚       â”‚   â”œâ”€â”€ __init__.py
â”‚       â”‚   â”œâ”€â”€ file_manager.py        # æ–‡ä»¶ç®¡ç†
â”‚       â”‚   â”œâ”€â”€ matcher.py             # æ•°æ®åŒ¹é…å¼•æ“
â”‚       â”‚   â”œâ”€â”€ quality_control.py     # æ•°æ®è´¨é‡æ§åˆ¶
â”‚       â”‚   â””â”€â”€ reporter.py            # æŠ¥å‘Šç”Ÿæˆ
â”‚       â”œâ”€â”€ config/                    # é…ç½®ç®¡ç†
â”‚       â”‚   â”œâ”€â”€ __init__.py
â”‚       â”‚   â”œâ”€â”€ field_config.py        # å­—æ®µé…ç½®
â”‚       â”‚   â”œâ”€â”€ match_config.py        # åŒ¹é…ç­–ç•¥é…ç½®
â”‚       â”‚   â””â”€â”€ settings.py            # å…¨å±€è®¾ç½®
â”‚       â”œâ”€â”€ utils/                     # å·¥å…·å‡½æ•°
â”‚       â”‚   â”œâ”€â”€ __init__.py
â”‚       â”‚   â”œâ”€â”€ data_utils.py          # æ•°æ®å¤„ç†å·¥å…·
â”‚       â”‚   â”œâ”€â”€ file_utils.py          # æ–‡ä»¶æ“ä½œå·¥å…·
â”‚       â”‚   â””â”€â”€ validation.py          # æ•°æ®éªŒè¯å·¥å…·
â”‚       â”œâ”€â”€ gui/                       # å›¾å½¢ç•Œé¢(å¯é€‰)
â”‚       â”‚   â”œâ”€â”€ __init__.py
â”‚       â”‚   â””â”€â”€ main_window.py
â”‚       â””â”€â”€ cli/                       # å‘½ä»¤è¡Œç•Œé¢
â”‚           â”œâ”€â”€ __init__.py
â”‚           â””â”€â”€ main.py
â”œâ”€â”€ tests/                             # æµ‹è¯•ä»£ç 
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ test_core/                     # æ ¸å¿ƒåŠŸèƒ½æµ‹è¯•
â”‚   â”œâ”€â”€ test_config/                   # é…ç½®æ¨¡å—æµ‹è¯•
â”‚   â”œâ”€â”€ test_utils/                    # å·¥å…·å‡½æ•°æµ‹è¯•
â”‚   â””â”€â”€ test_data/                     # æµ‹è¯•æ•°æ®
â”‚       â”œâ”€â”€ sample_data.xlsx
â”‚       â””â”€â”€ expected_results.xlsx
â”œâ”€â”€ scripts/                           # è„šæœ¬å’Œå·¥å…·
â”‚   â”œâ”€â”€ install.py                     # å®‰è£…è„šæœ¬
â”‚   â”œâ”€â”€ migrate_legacy.py              # è¿ç§»è„šæœ¬
â”‚   â””â”€â”€ generate_config.py             # é…ç½®ç”Ÿæˆè„šæœ¬
â”œâ”€â”€ data/                              # æ•°æ®ç›®å½•
â”‚   â”œâ”€â”€ input/                         # è¾“å…¥æ•°æ®
â”‚   â”œâ”€â”€ output/                        # è¾“å‡ºç»“æœ
â”‚   â”œâ”€â”€ config/                        # é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ logs/                          # æ—¥å¿—æ–‡ä»¶
â””â”€â”€ examples/                          # ä½¿ç”¨ç¤ºä¾‹
    â”œâ”€â”€ basic_usage.py
    â”œâ”€â”€ advanced_matching.py
    â””â”€â”€ custom_config.py
```

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### æ ¸å¿ƒä¾èµ–
- **pandas >= 1.5.0**: æ•°æ®å¤„ç†å’Œåˆ†æ
- **openpyxl >= 3.0.0**: Excelæ–‡ä»¶è¯»å†™
- **fuzzywuzzy >= 0.18.0**: æ¨¡ç³Šå­—ç¬¦ä¸²åŒ¹é…
- **python-Levenshtein >= 0.12.0**: å­—ç¬¦ä¸²ç›¸ä¼¼åº¦è®¡ç®—

### å¼€å‘ä¾èµ–
- **pytest >= 7.0.0**: å•å…ƒæµ‹è¯•æ¡†æ¶
- **black >= 22.0.0**: ä»£ç æ ¼å¼åŒ–
- **flake8 >= 5.0.0**: ä»£ç é™æ€æ£€æŸ¥
- **mypy >= 0.980**: ç±»å‹æ£€æŸ¥

### å¯é€‰ä¾èµ–
- **tkinter**: å›¾å½¢ç”¨æˆ·ç•Œé¢
- **matplotlib >= 3.5.0**: æ•°æ®å¯è§†åŒ–
- **seaborn >= 0.11.0**: ç»Ÿè®¡æ•°æ®å¯è§†åŒ–

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…
```bash
# ä»æºç å®‰è£…
git clone https://github.com/your-org/medical-data-integration-platform.git
cd medical-data-integration-platform
pip install -e .

# æˆ–ä½¿ç”¨pipå®‰è£…(å‘å¸ƒå)
pip install medical-data-integration-platform
```

### åŸºæœ¬ä½¿ç”¨
```python
from mdip import DataMatcher, FieldConfig

# åˆ›å»ºå­—æ®µé…ç½®
config = FieldConfig.from_template("basic_medical_fields")

# åˆå§‹åŒ–æ•°æ®åŒ¹é…å™¨
matcher = DataMatcher(config)

# æ·»åŠ æ•°æ®æ–‡ä»¶
matcher.add_file("cag_data.xlsx", file_type="primary", group="CAG")
matcher.add_file("pci_data.xlsx", file_type="primary", group="PCI")

# æ‰§è¡ŒåŒ¹é…
results = matcher.match_and_merge()

# ä¿å­˜ç»“æœ
results.to_excel("merged_results.xlsx")
```

## ğŸ“– æ–‡æ¡£

- [å®‰è£…æŒ‡å—](docs/installation.md)
- [ç”¨æˆ·æŒ‡å—](docs/user_guide.md)
- [APIå‚è€ƒ](docs/api_reference.md)
- [ä½¿ç”¨ç¤ºä¾‹](examples/)

## ğŸ§ª æµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
pytest

# è¿è¡ŒæŒ‡å®šæµ‹è¯•
pytest tests/test_core/

# ç”Ÿæˆæµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Š
pytest --cov=src/mdip --cov-report=html
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿è´¡çŒ®ä»£ç ï¼è¯·å…ˆé˜…è¯» [è´¡çŒ®æŒ‡å—](CONTRIBUTING.md)ã€‚

### å¼€å‘æµç¨‹
1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/amazing-feature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some amazing feature'`)
4. æ¨é€åˆ†æ”¯ (`git push origin feature/amazing-feature`)
5. åˆ›å»º Pull Request

### ä»£ç è§„èŒƒ
- éµå¾ª PEP 8 Python ä»£ç è§„èŒƒ
- ä½¿ç”¨ black è¿›è¡Œä»£ç æ ¼å¼åŒ–
- æ·»åŠ ç±»å‹æ³¨è§£
- ç¼–å†™å•å…ƒæµ‹è¯•
- æ›´æ–°æ–‡æ¡£

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

## ğŸ“ æ”¯æŒ

- ğŸ“§ é‚®ç®±: support@mdip.org
- ğŸ› é—®é¢˜åé¦ˆ: [GitHub Issues](https://github.com/your-org/medical-data-integration-platform/issues)
- ğŸ“– æ–‡æ¡£: [åœ¨çº¿æ–‡æ¡£](https://mdip.readthedocs.io/)

## ğŸ¯ è·¯çº¿å›¾

### v1.0.0 (å½“å‰ç‰ˆæœ¬)
- [x] æ ¸å¿ƒæ•°æ®åŒ¹é…åŠŸèƒ½
- [x] Excel/CSVæ–‡ä»¶æ”¯æŒ
- [x] åŸºæœ¬è´¨é‡æ§åˆ¶
- [x] é…ç½®ç®¡ç†ç³»ç»Ÿ

### v1.1.0 (è®¡åˆ’ä¸­)
- [ ] å›¾å½¢ç”¨æˆ·ç•Œé¢
- [ ] æ•°æ®å¯è§†åŒ–
- [ ] æ€§èƒ½ä¼˜åŒ–
- [ ] æ›´å¤šåŒ¹é…ç­–ç•¥

### v2.0.0 (æœªæ¥ç‰ˆæœ¬)
- [ ] æ•°æ®åº“æ”¯æŒ
- [ ] RESTful API
- [ ] åˆ†å¸ƒå¼å¤„ç†
- [ ] æœºå™¨å­¦ä¹ åŒ¹é…

## ğŸ† è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰è´¡çŒ®è€…å’Œä½¿ç”¨è€…å¯¹æœ¬é¡¹ç›®çš„æ”¯æŒï¼

---

**æ³¨æ„**: è¿™æ˜¯ä¸€ä¸ªåŒ»ç–—æ•°æ®å¤„ç†å·¥å…·ï¼Œä½¿ç”¨æ—¶è¯·ç¡®ä¿éµå®ˆç›¸å…³çš„æ•°æ®ä¿æŠ¤æ³•è§„å’ŒåŒ»ç–—æ•°æ®å¤„ç†è§„èŒƒã€‚